/**
 * cssAsync 1.2
 * load style css Asynchronously
 *
 * Wallace Rio <wallrio@gmail.com>
 *
 * 
 */

!function(){for(var addEvent=function(e,t,r,n,s,l,i){var o=t.split(" "),a=arguments,c=function(e,t,n){void 0==t&&(t=!0);var s=e;void 0==s&&(s=window),nArgs_reindex=[];nArgs_reindex[0]=!1;for(l=0;l<n.length;l++)l>3&&(nArgs_reindex[nArgs_reindex.length]=n[l]);if(s.addEventListener)for(l=0;l<o.length;l++){i=o[l];!function(e,t,r,n){t.addEventListener(i,function(n){if(e[0]=n,r)return r.apply(t,e)},n)}(nArgs_reindex,s,r,t)}else if(s.attachEvent)for(var l=0;l<o.length;l++){var i=o[l];s.attachEvent("on"+i,function(e){if(nArgs_reindex[0]=e,r)return r.call(s,nArgs_reindex)})}};if("string"!=typeof e)c(e,n,a);else for(var u=document.querySelectorAll(e),d=0;d<u.length;d++){var f=u[d];c(f,n,a)}},defer=function(){for(var script=document.querySelectorAll('[type="text/javascript-defer"]'),i=0;i<script.length;i++){var element=script[i];eval(element.innerHTML)}},ajax=function(e){var t=e.url||null,r=e.success||null,n=e.error||null,s=e.progress||null,l=e.data||null,i=e.type||"post",o=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}return null}();o.open(i,t,!0),o.upload&&(o.upload.onprogress=function(e){e.lengthComputable&&s&&s(e.loaded,e.total)},o.upload.onloadstart=function(e){s&&s(0,e.total)},o.upload.onloadend=function(e){s&&s(e.loaded,e.total)},o.upload.onprogress=function(e){if(e.lengthComputable)Math.floor(e.loaded/e.total*100)}),o.onreadystatechange=function(){if(o.readyState>3){if(404===o.status)return n&&n(o.responseText),!1;r&&r(o.responseText)}};var a=new FormData;for(key in l)l.hasOwnProperty(key)&&a.append(key,l[key]);o.send(a)},insertFor=function(e){for(var t=e.container,r=e["use-style-tag"],n=document.querySelectorAll('[rel="stylesheet-async"]'),s=0;s<n.length;s++)if(1!=n[s].cssAsyncInit)if(n[s].cssAsyncInit=1,!1===r){n[s].rel="stylesheet",n[s].setAttribute("data-by-css-async",""),n[s].removeAttribute("disabled");var l=n[s].href;console.log("#"+s+" - URL: "+l)}else!function(e){ajax({url:e,success:function(r){var n=document.createElement("style");n.setAttribute("href",e),n.setAttribute("data-by-css-async",""),n.innerHTML=r,document.querySelector(t).appendChild(n),console.log("#"+s+" - URL: "+e)}})}(l=n[s].href)},insertOrder=function(e,t,r,n){if(null==t[r])return!1;var s=n.container;if(!1===n["use-style-tag"]){t[r].rel="stylesheet",t[r].setAttribute("data-by-css-async",""),t[r].removeAttribute("disabled");l=t[r].href;console.log("#"+r+" - URL: "+l),e(e,t,r+1,n)}else{var l=t[r].href;ajax({url:l,success:function(i){var o=document.createElement("style");o.setAttribute("href",l),o.setAttribute("data-by-css-async",""),o.innerHTML=i,document.querySelector(s).appendChild(o),console.log("#"+r+" - URL: "+l),e(e,t,r+1,n)}})}},execute=function(e){var t=e["rel-original"];if(!0===e["style-disable"]){for(var r=document.querySelectorAll('[rel="stylesheet"]'),n=0;n<r.length;n++)r[n].setAttribute("disabled","disabled"),r[n].parentNode.removeChild(r[n]);return!1}if(!0===t)for(var r=document.querySelectorAll('[rel="stylesheet"]'),n=0;n<r.length;n++)r[n].setAttribute("rel","stylesheet-async"),r[n].setAttribute("disabled","disabled");r=document.querySelectorAll('[rel="stylesheet-async"]');setTimeout(function(){1==e["use-order"]?insertOrder(insertOrder,r,0,e):insertFor(e),console.groupEnd()},300)},scriptAll=document.querySelectorAll("script"),attributes={"use-style-tag":!1,"use-order":!0,container:"body","rel-original":!1,"style-disable":!1},i=0;i<scriptAll.length;i++){var src=scriptAll[i].src;if(!1!==src.indexOf("css-async.js")&&null!=scriptAll[i].getAttribute("data-attributes")){var dataAttributes=scriptAll[i].getAttribute("data-attributes"),preAttributes=JSON.parse("{"+dataAttributes+"}");for(key in preAttributes)attributes[key]=preAttributes[key];break}}console.info("CSS Async loaded"),console.group(),execute(attributes),addEvent(window,"load",function(){defer()})}();